function preload(){game.load.baseURL="http://localhost:3000/",game.load.path="assets/",game.load.spritesheet("rect_buttons","sprites/uipack_fixed/new_ui/buttons/rect_buttons.png",192,49),game.load.spritesheet("square_buttons","sprites/uipack_fixed/new_ui/buttons/square_buttons.png",51,49),game.load.spritesheet("square_buttons_plus","sprites/uipack_fixed/new_ui/buttons/square_buttons_plus.png",51,49),game.load.spritesheet("square_buttons_minus","sprites/uipack_fixed/new_ui/buttons/square_buttons_minus.png",51,49),game.load.images(gameFileKeys,gameFiles),globalDiePool=new diePool,globalDiePool.generatePool(numPlayers),dieBidPool=new diePool,playerPool=new playerPool(numPlayers)}function onGetNameIdSuccess(e){gameId=e.id.toString(),gameName=e.name,$.post("/games/join/"+gameId,{logged_in_users:1}),joinLobby(),console.log("game_channel"+gameId),channel=pusher.subscribe("game_channel"+gameId),channel2=pusher.subscribe("chat_channel"+gameId),channel2.bind("chat",chat),channel.bind("challenge_event",function(e){testButtonText.text=e.uname+" challenges the bid!";for(var t=e.diepool.split(",").map(Number),n=[],a=0;a<t.length;a++)n.push(new Die(t[a]));globalDiePool.allObjects=n,console.log(globalDiePool.allObjects),e.result?console.log("Current player lost"):console.log("previous player lost")}),channel.bind("bid_event",function(e){$("#dieQuantity").text(e.quantity),$("#dieValue").text(e.value),dieBidPool.resetDiePool(),dieBidGroup.removeAll(),dieValue=parseInt($("#dieValue").text()),dieQuantity=parseInt($("#dieQuantity").text());for(var t=0;t<dieQuantity;t++)dieBidPool.addDie(new Die(Math.ceil(dieValue)));dieBidSpriteGroup.renderSprites("box"),dieQuantity=e.quantity,dieValue=e.value;var n=e.name;testButtonText.text=n+" placed a bid: "+dieQuantity+" #"+dieValue+"'s"}),channel.bind("render_add",function(e){console.log("I have rendered"),console.log(e);for(var t=0;t<e.logged_in_users;t++)playerPool.addPlayer(new Player("",t));playerSpriteGroup.renderSprites("octagonal"),startGame()}),channel.bind("render_delete",function(e){console.log("I have rendered"),console.log(e);var t=e.user_id;$.get("/session/recent_user_name/"+t,function(e){var t=e.uname;testButtonText.text=t+" left the game.",playerGroup.removeAll(),playerPool.removePlayer(playerPool.getUserIndexByUserName(t)),playerSpriteGroup.renderSprites("octagonal")})}),channel.bind("render_game_start",function(e){logo.alpha=0;var t=e.name;console.log(e),testButtonText.text=t+" has started, enjoy!"}),channel.bind("render_round_start",function(e){var t=e.round;testButtonText.text="Round "+t+" has started. Bid amount and value is reset. Get ready!"});var t,n;channel.bind("render_turn_start",function(e){var t=e.turn;console.log(e),$.get("/game_users/"+t+"/user_username",function(e){playerUsername=e.uname,testButtonText.text="It's "+playerUsername+"'s turn to bid or challenge.",n=40;var t,a=setInterval(function(){t=parseInt(n%60,10),t=10>t?"0"+t:t,$(".turnSeconds").text(t),--n<0&&(clearInterval(a),n=0,testButtonText.text="Time is up! "+playerUsername+" lost a die.")},1e3)})}),channel.bind("render_game_end",function(){testButtonText.text="Game ayyLmao is over! The winner is: Listana! Congratulations :)"}),channel.bind("render_round_end",function(){testButtonText.text="Round # 2 ended. Starting round # 3."}),channel.bind("render_turn_end",function(e){var n=e.turn;$.get("/game_users/"+n.charAt(0)+"/user_username",function(e){clearInterval(t),testButtonText.text=e.uname+"'s turn ended."}),setTimeout(function(){$.get("/game_users/"+n.charAt(2)+"/user_username",function(e){testButtonText.text="Next turn: "+e.uname+". Get ready!"})},1e3)})}function create(){game.stage.backgroundColor="#fff",logo=game.add.sprite(game.world.centerX,game.world.centerY,"logo"),logo.anchor.setTo(.5,.5),logo.alpha=0,game.add.tween(logo).to({alpha:1},2e3,Phaser.Easing.Linear.None,!0),debugText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),testButtonText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),diePoolText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),playerText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),debugText.fixedToCamera=!0,debugText.cameraOffset.setTo(200,500),testButtonText.fixedToCamera=!0,testButtonText.cameraOffset.setTo(10,50),graphics=game.add.graphics(game.world.centerX,game.world.centerY),playerProfileGroup=game.add.group(),playerProfileGroup.position.x=game.world.centerX+320,playerProfileGroup.position.y=game.world.centerY-280,playerProfileButton=game.make.button(0,0,"square_buttons",function(){},this,2,1,0),playerProfileButton.scale.setTo(.7,.7),window.rich=playerProfileButton,playerProfileGroup.add(playerProfileButton),playerGroup=game.add.group(),playerSpriteGroup=new SpriteGroup("player",playerGroup,playerPool,6,-20,-80),playerGroup.position.setTo(game.world.centerX,game.world.centerY),playerGroup.scale.setTo(.75,.75),graphics.lineStyle(5,255,1),graphics.drawRect(-360,190,300,100),dieGroup=game.add.group(),dieSpriteGroup=new SpriteGroup("dice",dieGroup,globalDiePool,120,1450),dieGroup.scale.setTo(.35,.35),dieBidGroup=game.add.group(),dieBidSpriteGroup=new SpriteGroup("dice",dieBidGroup,dieBidPool,game.world.centerX+500,game.world.centerY+400),dieBidGroup.scale.setTo(.35,.35),graphics.lineStyle(5,255,1),graphics.drawRect(-60,190,160,100),gameControlsGroup=game.add.group(),gameControlsGroup.position.x=game.world.centerX,gameControlsGroup.position.y=game.world.centerY+200,decrementDieQuantityButton=game.make.button(-50,30,"square_buttons_minus",decrementDieQuantity,this,2,1,0),decrementDieQuantityButton.scale.setTo(.35,.35),window.rich=decrementDieQuantityButton,incrementDieQuantityButton=game.make.button(-20,30,"square_buttons_plus",incrementDieQuantity,this,2,1,0),incrementDieQuantityButton.scale.setTo(.35,.35),window.rich=incrementDieQuantityButton,decrementDieValueButton=game.make.button(40,30,"square_buttons_minus",decrementDieValue,this,2,1,0),decrementDieValueButton.scale.setTo(.35,.35),window.rich=decrementDieValueButton,incrementDieValueButton=game.make.button(70,30,"square_buttons_plus",incrementDieValue,this,2,1,0),incrementDieValueButton.scale.setTo(.35,.35),window.rich=incrementDieValueButton,challengeButton=game.make.button(-50,60,"rect_buttons",challenge,this,2,1,0),challengeButton.scale.setTo(.25,.5),window.rich=challengeButton,makeBidButton=game.make.button(40,60,"rect_buttons",bid,this,2,1,0),makeBidButton.scale.setTo(.25,.5),window.rich=makeBidButton,gameControlsGroup.add(decrementDieQuantityButton),gameControlsGroup.add(incrementDieQuantityButton),gameControlsGroup.add(decrementDieValueButton),gameControlsGroup.add(incrementDieValueButton),gameControlsGroup.add(challengeButton),gameControlsGroup.add(makeBidButton),graphics.lineStyle(5,255,1),graphics.drawRect(100,190,260,100),window.graphics=graphics,gameMenuGroup=game.add.group(),gameMenuGroup.position.x=game.world.centerX+115,gameMenuGroup.position.y=game.world.centerY+200,menuButton1=game.make.button(0,25,"rect_buttons",testMethod1,this,2,1,0),menuButton1.scale.setTo(.6,.5),window.rich=menuButton1,menuButton2=game.make.button(0,50,"rect_buttons",testMethod2,this,2,1,0),menuButton2.scale.setTo(.6,.5),window.rich=menuButton2,menuButton3=game.make.button(120,25,"rect_buttons",testMethod3,this,2,1,0),menuButton3.scale.setTo(.6,.5),window.rich=menuButton3,menuButton4=game.make.button(120,50,"rect_buttons",testMethod4,this,2,1,0),menuButton4.scale.setTo(.6,.5),window.rich=menuButton4,gameMenuGroup.add(menuButton1),gameMenuGroup.add(menuButton2),gameMenuGroup.add(menuButton3),gameMenuGroup.add(menuButton4)}function testMethod1(){startGame()}function testMethod2(){startRound()}function testMethod3(){startTurn()}function testMethod4(){endTurn()}var game=new Phaser.Game(740,600,Phaser.AUTO,"phaser-window",{preload:preload,create:create}),assetsLoaded=!1,logo,text,state,globalDiePool,dieBidPool,playerPool,channel,channel2,gameId="",gameName="",numPlayers=4,gameFileKeys=["dollars","logo","dice1","dice2","dice3","dice4","dice5","dice6","player1","player2","player3","player4","player5","player6","player7","player8"],gameFiles=["sprites/dollar_sign.png","sprites/liars_dice_logo.png","sprites/_main/dice/dieRed1.png","sprites/_main/dice/dieRed2.png","sprites/_main/dice/dieRed3.png","sprites/_main/dice/dieRed4.png","sprites/_main/dice/dieRed5.png","sprites/_main/dice/dieRed6.png","sprites/_main/player/player1.png","sprites/_main/player/player2.png","sprites/_main/player/player3.png","sprites/_main/player/player4.png","sprites/_main/player/player5.png","sprites/_main/player/player6.png","sprites/_main/player/player7.png","sprites/_main/player/player8.png"],pusher=new Pusher("926b2fce0ff5222dc001",{cluster:"eu",encrypted:!0}),testButtonGroup,sceneButtonGroup,gameRoundGroup,gameNameGroup,gameTimeGroup,gameModeGroup,playerProfileGroup,gameControlsGroup,gameMenuGroup,playerDiceGroup,numPlayersTimeout,assetsLoadedTimeout,hasWinnerTimeout;$(document).ready(function(){$.get("/session/name_id",onGetNameIdSuccess)});