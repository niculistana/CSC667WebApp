function preload(){game.load.baseURL="https://staging-4242.herokuapp.com",game.load.baseURL="https://intense-temple-36417.herokuapp.com/",game.load.path="assets/",game.load.spritesheet("rect_buttons","sprites/uipack_fixed/new_ui/buttons/rect_buttons.png",192,49),game.load.spritesheet("square_buttons","sprites/uipack_fixed/new_ui/buttons/square_buttons.png",51,49),game.load.spritesheet("square_buttons_plus","sprites/uipack_fixed/new_ui/buttons/square_buttons_plus.png",51,49),game.load.spritesheet("square_buttons_minus","sprites/uipack_fixed/new_ui/buttons/square_buttons_minus.png",51,49),game.load.images(gameFileKeys,gameFiles),globalDiePool=new diePool,globalDiePool.generatePool(4),playerStash=new diePool,dieBidPool=new diePool,playerPool=new playerPool(4)}function onGetNameIdSuccess(e){gameId=e.id.toString(),gameName=e.name,joinLobby(),console.log("game_channel"+gameId),channel=pusher.subscribe("game_channel"+gameId),channel2=pusher.subscribe("chat_channel"+gameId),channel2.bind("chat",chat),channel2.bind("chat_add",playerAdd),channel.bind("challenge_event",function(e){testButtonText.text=e.uname+" challenges the bid!";for(var t=e.diepool.split(",").map(Number),n=[],a=0;a<t.length;a++)n.push(t[a]);globalDiePool.allObjects=n,console.log(globalDiePool.allObjects),dieSpriteGroup.renderSprites("box"),e.result?(testButtonText.text=e.uname+" lost the challenge!",console.log("Current player lost")):(testButtonText.text=e.uname+" lost the challenge!",console.log("previous player lost")),num_users_remaining=e.num_users_remaining,console.log("num_users_remaining: "+num_users_remaining),setTimeout(function(){globalDieGroup.removeAll(),stashGroup.removeAll(),dieBidGroup.removeAll(),num_users_remaining>1?startRound():endGame()},3e3)}),channel.bind("bid_event",function(e){$("#dieQuantity").text(e.quantity),$("#dieValue").text(e.value),dieBidPool.emptyDiePool(),dieBidGroup.removeAll(),dieValue=parseInt($("#dieValue").text()),dieQuantity=parseInt($("#dieQuantity").text());for(var t=0;t<dieQuantity;t++)dieBidPool.addDie(Math.ceil(dieValue));dieBidSpriteGroup.renderSprites("box"),dieQuantity=e.quantity,dieValue=e.value,previousPlayerId=e.prev_player_id,$.get("/session/recent_user_name/"+previousPlayerId,function(e){var t=e.uname;testButtonText.text=t+" placed a bid: "+dieQuantity+" #"+dieValue+"'s"});var n=e.turn;setTimeout(function(){$.get("/session/recent_user_name/"+n,function(e){var t=e.uname;testButtonText.text="It's "+t+"'s turn."})},2e3)}),channel.bind("render_add",function(e){console.log("I have rendered"),console.log(e);for(var t=0;t<e.logged_in_users;t++)playerPool.addPlayer(new Player("",t));playerSpriteGroup.renderSprites("octagonal"),startGame()}),channel.bind("render_delete",function(e){console.log("I have rendered"),console.log(e);var t=e.user_id;$.get("/session/recent_user_name/"+t,function(e){var t=e.uname;testButtonText.text=t+" left the game.",playerGroup.removeAll(),playerPool.removePlayer(playerPool.getUserIndexByUserName(t)),playerSpriteGroup.renderSprites("octagonal")})}),channel.bind("render_game_start",function(e){logo.destroy();var t=e.name;$(".overLayTopLeft").removeClass("hidden"),$(".overLayTopRight").removeClass("hidden"),testButtonText.text=t+" has started, enjoy!",startRound()}),channel.bind("render_round_start",function(e){globalDiePool.allObjects=e.diepool.split(",");var t=e.round;$(".numRounds").text(t),testButtonText.text="Round "+t+" has started. Bid amount and value is reset. Get ready!",setTimeout(function(){$.get("/session/game_turn_id",function(e){var t=e.turn;$.get("/session/recent_user_name/"+t,function(e){var t=e.uname;testButtonText.text="It's "+t+"'s turn."})})},2e3)}),channel.bind("render_game_end",function(e){var t=e.winner_id;$.get("/session/recent_user_name/"+t,function(e){var t=e.uname;testButtonText.text="Game is over! The winner is "+t+"! Congratulations :)"})}),channel.bind("render_round_end",function(){testButtonText.text="Round # 2 ended. Starting round # 3."})}function create(){game.stage.backgroundColor="#fff",logo=game.add.sprite(game.world.centerX,game.world.centerY,"logo"),logo.anchor.setTo(.5,.5),debugText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),testButtonText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),diePoolText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),playerText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),debugText.fixedToCamera=!0,debugText.cameraOffset.setTo(200,500),testButtonText.fixedToCamera=!0,testButtonText.cameraOffset.setTo(10,50),graphics=game.add.graphics(game.world.centerX,game.world.centerY),playerProfileGroup=game.add.group(),playerProfileGroup.position.x=game.world.centerX+320,playerProfileGroup.position.y=game.world.centerY-280,playerProfileButton=game.make.button(0,0,"square_buttons",function(){},this,2,1,0),playerProfileButton.scale.setTo(.7,.7),window.rich=playerProfileButton,playerProfileGroup.add(playerProfileButton),playerGroup=game.add.group(),playerSpriteGroup=new SpriteGroup("player",playerGroup,playerPool,6,-20,-80),playerGroup.position.setTo(game.world.centerX,game.world.centerY),playerGroup.scale.setTo(.75,.75),graphics.lineStyle(5,255,1),graphics.drawRect(-360,190,300,100),globalDieGroup=game.add.group(),dieSpriteGroup=new SpriteGroup("dice",globalDieGroup,globalDiePool,game.world.centerX+500,game.world.centerY+900),globalDieGroup.scale.setTo(.35,.35),dieBidGroup=game.add.group(),dieBidSpriteGroup=new SpriteGroup("dice",dieBidGroup,dieBidPool,game.world.centerX+500,game.world.centerY+400),dieBidGroup.scale.setTo(.35,.35),stashGroup=game.add.group(),dieStashGroup=new SpriteGroup("dice",stashGroup,playerStash,game.world.centerX-275,game.world.centerY+750),stashGroup.scale.setTo(.5,.5),graphics.lineStyle(5,255,1),graphics.drawRect(-60,190,160,100),gameControlsGroup=game.add.group(),gameControlsGroup.position.x=game.world.centerX,gameControlsGroup.position.y=game.world.centerY+200,decrementDieQuantityButton=game.make.button(-50,30,"square_buttons_minus",decrementDieQuantity,this,2,1,0),decrementDieQuantityButton.scale.setTo(.35,.35),window.rich=decrementDieQuantityButton,incrementDieQuantityButton=game.make.button(-20,30,"square_buttons_plus",incrementDieQuantity,this,2,1,0),incrementDieQuantityButton.scale.setTo(.35,.35),window.rich=incrementDieQuantityButton,decrementDieValueButton=game.make.button(40,30,"square_buttons_minus",decrementDieValue,this,2,1,0),decrementDieValueButton.scale.setTo(.35,.35),window.rich=decrementDieValueButton,incrementDieValueButton=game.make.button(70,30,"square_buttons_plus",incrementDieValue,this,2,1,0),incrementDieValueButton.scale.setTo(.35,.35),window.rich=incrementDieValueButton,challengeButton=game.make.button(-50,60,"rect_buttons",challenge,this,2,1,0),challengeButton.scale.setTo(.25,.5),window.rich=challengeButton,makeBidButton=game.make.button(40,60,"rect_buttons",bid,this,2,1,0),makeBidButton.scale.setTo(.25,.5),window.rich=makeBidButton,gameControlsGroup.add(decrementDieQuantityButton),gameControlsGroup.add(incrementDieQuantityButton),gameControlsGroup.add(decrementDieValueButton),gameControlsGroup.add(incrementDieValueButton),gameControlsGroup.add(challengeButton),gameControlsGroup.add(makeBidButton),graphics.lineStyle(5,255,1),graphics.drawRect(100,190,260,100),window.graphics=graphics,gameMenuGroup=game.add.group(),gameMenuGroup.position.x=game.world.centerX+115,gameMenuGroup.position.y=game.world.centerY+200}function testMethod1(){endGame()}function testMethod2(){startRound()}function testMethod3(){startTurn()}function testMethod4(){endTurn()}var game=new Phaser.Game(740,600,Phaser.AUTO,"phaser-window",{preload:preload,create:create}),logo,text,globalDiePool,playerStash,dieBidPool,playerPool,channel,channel2,gameId="",gameName="",gameFileKeys=["dollars","logo","dice1","dice2","dice3","dice4","dice5","dice6","player1","player2","player3","player4","player5","player6","player7","player8"],gameFiles=["sprites/dollar_sign.png","sprites/liars_dice_logo.png","sprites/_main/dice/dieRed1.png","sprites/_main/dice/dieRed2.png","sprites/_main/dice/dieRed3.png","sprites/_main/dice/dieRed4.png","sprites/_main/dice/dieRed5.png","sprites/_main/dice/dieRed6.png","sprites/_main/player/player1.png","sprites/_main/player/player2.png","sprites/_main/player/player3.png","sprites/_main/player/player4.png","sprites/_main/player/player5.png","sprites/_main/player/player6.png","sprites/_main/player/player7.png","sprites/_main/player/player8.png"],pusher=new Pusher("926b2fce0ff5222dc001",{cluster:"eu",encrypted:!0}),testButtonGroup,sceneButtonGroup,gameRoundGroup,gameNameGroup,gameTimeGroup,gameModeGroup,playerProfileGroup,gameControlsGroup,gameMenuGroup,playerDiceGroup;$(document).ready(function(){$.get("/session/name_id",onGetNameIdSuccess)});