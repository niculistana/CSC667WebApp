function preload(){game.load.baseURL="http://localhost:3000/",game.load.path="assets/",game.load.spritesheet("rect_buttons","sprites/uipack_fixed/new_ui/buttons/rect_buttons.png",192,49),game.load.spritesheet("square_buttons","sprites/uipack_fixed/new_ui/buttons/square_buttons.png",51,49),game.load.images(gameFileKeys,gameFiles),diePool=new diePool(4),diePool.generatePool()}function create(){game.stage.backgroundColor="#fff",logo=game.add.sprite(game.world.centerX,game.world.centerY,"logo"),logo.anchor.setTo(.5,.5),logo.alpha=0,game.add.tween(logo).to({alpha:1},2e3,Phaser.Easing.Linear.None,!0),debugText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),testButtonText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"left"}),diePoolText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),playerText=game.add.text(game.world.centerX,game.world.centerY,"",{font:"12px Arial",fill:"#ff0044",align:"center",wordWrap:!0,wordWrapWidth:100}),debugText.fixedToCamera=!0,debugText.cameraOffset.setTo(200,500),testButtonText.fixedToCamera=!0,testButtonText.cameraOffset.setTo(10,50),graphics=game.add.graphics(game.world.centerX,game.world.centerY),gameRoundGroup=game.add.group(),gameRoundGroup.position.x=game.world.centerX-340,gameRoundGroup.position.y=game.world.centerY-280,gameRoundTitleText="Round #: 6",style={font:"20px Arial",fill:"#000",align:"left"},gameRoundTitleText=game.add.text(0,0,gameRoundTitleText,style),gameRoundGroup.add(gameRoundTitleText),gameNameGroup=game.add.group(),gameNameGroup.position.x=game.world.centerX-180,gameNameGroup.position.y=game.world.centerY-280,gameRoundTitleText="Cool Kids",style={font:"20px Arial",fill:"#000",align:"left"},gameRoundTitleText=game.add.text(0,0,gameRoundTitleText,style),gameNameGroup.add(gameRoundTitleText),gameTimeGroup=game.add.group(),gameTimeGroup.position.x=game.world.centerX,gameTimeGroup.position.y=game.world.centerY-280,gameTimeValueText="0:59",style={font:"20px Arial",fill:"#000",align:"left"},gameTimeValueText=game.add.text(0,0,gameTimeValueText,style),gameTimeGroup.add(gameTimeValueText),gameModeGroup=game.add.group(),gameModeGroup.position.x=game.world.centerX+180,gameModeGroup.position.y=game.world.centerY-280,gameModeValueText="Classic",style={font:"20px Arial",fill:"#000",align:"left"},gameModeValueText=game.add.text(0,0,gameModeValueText,style),gameModeGroup.add(gameModeValueText),playerProfileGroup=game.add.group(),playerProfileGroup.position.x=game.world.centerX+320,playerProfileGroup.position.y=game.world.centerY-280,playerProfileButton=game.make.button(0,0,"square_buttons",function(){},this,2,1,0),playerProfileButton.scale.setTo(.7,.7),window.rich=playerProfileButton,playerProfileGroup.add(playerProfileButton),graphics.lineStyle(5,255,1),graphics.drawRect(-360,190,300,100),dieGroup=game.add.group(),dieSpriteGroup=new SpriteGroup("dice",dieGroup,diePool,6,120,1450),dieGroup.scale.setTo(.35,.35),graphics.lineStyle(5,255,1),graphics.drawRect(-60,190,160,100),gameControlsGroup=game.add.group(),gameControlsGroup.position.x=game.world.centerX,gameControlsGroup.position.y=game.world.centerY+200,decrementDiceAmountButton=game.make.button(-50,50,"square_buttons",function(){},this,2,1,0),decrementDiceAmountButton.scale.setTo(.5,.5),window.rich=decrementDiceAmountButton,incrementDiceAmountButton=game.make.button(-20,50,"square_buttons",function(){},this,2,1,0),incrementDiceAmountButton.scale.setTo(.5,.5),window.rich=incrementDiceAmountButton,decrementDiceValueButton=game.make.button(40,50,"square_buttons",function(){},this,2,1,0),decrementDiceValueButton.scale.setTo(.5,.5),window.rich=decrementDiceValueButton,incrementDiceValueButton=game.make.button(70,50,"square_buttons",function(){},this,2,1,0),incrementDiceValueButton.scale.setTo(.5,.5),window.rich=incrementDiceValueButton,diceAmountText="3",style={font:"50px Arial",fill:"#000",align:"left"},diceAmountTextElement=game.add.text(-35,-10,diceAmountText,style),diceValueText="5",style={font:"50px Arial",fill:"#000",align:"left"},diceValueTextElement=game.add.text(55,-10,diceValueText,style),gameControlsGroup.add(diceAmountTextElement),gameControlsGroup.add(diceValueTextElement),gameControlsGroup.add(decrementDiceAmountButton),gameControlsGroup.add(incrementDiceAmountButton),gameControlsGroup.add(decrementDiceValueButton),gameControlsGroup.add(incrementDiceValueButton),graphics.lineStyle(5,255,1),graphics.drawRect(100,190,260,100),window.graphics=graphics,gameMenuGroup=game.add.group(),gameMenuGroup.position.x=game.world.centerX+115,gameMenuGroup.position.y=game.world.centerY+200,menuButton1=game.make.button(0,25,"rect_buttons",testMethod1,this,2,1,0),menuButton1.scale.setTo(.6,.5),window.rich=menuButton1,menuButton2=game.make.button(0,50,"rect_buttons",testMethod2,this,2,1,0),menuButton2.scale.setTo(.6,.5),window.rich=menuButton2,menuButton3=game.make.button(120,25,"rect_buttons",testMethod3,this,2,1,0),menuButton3.scale.setTo(.6,.5),window.rich=menuButton3,menuButton4=game.make.button(120,50,"rect_buttons",testMethod4,this,2,1,0),menuButton4.scale.setTo(.6,.5),window.rich=menuButton4,gameMenuGroup.add(menuButton1),gameMenuGroup.add(menuButton2),gameMenuGroup.add(menuButton3),gameMenuGroup.add(menuButton4)}function testMethod1(){var e={game:{name:gameName,turn:"1",diepool:[],completed:1}};for(var t in diePool.allObjects)e.game.diepool.push(diePool.allObjects[t].id);e.game.diepool=JSON.stringify(e.game.diepool),$.ajax({url:"/games/",type:"POST",dataType:"json",data:e,success:function(e){console.log("POST"),console.log(e)}}),dieSpriteGroup.renderSprites("box"),testButtonText.text="renderSprites"}function testMethod2(){diePool.shuffleDice(),testButtonText.text="shuffleDice"}function testMethod3(){diePool.removeDie(0);var e={_method:"PUT",game:{name:gameName,turn:"1",diepool:[],completed:1}};for(var t in diePool.allObjects)e.game.diepool.push(diePool.allObjects[t].id);e.game.diepool=JSON.stringify(e.game.diepool),$.ajax({url:"/games/"+gameId,type:"POST",data:e,success:function(){console.log("I have put")}}),dieGroup.removeAll(),dieSpriteGroup.renderSprites("box"),testButtonText.text="removeDie"}function testMethod4(){testButtonText.text="Ajax Get Dice from Database",$.ajax({url:"/games/"+gameId,type:"GET",dataType:"json",success:function(e){console.log("GET"),console.log(e);JSON.parse(e.diepool)}})}function waitGame(){players.push(new Player("2:00",playerNames[numPlayers],numPlayers)),players[numPlayers].getDice(diePool.allObjects),playerText.text+=players[numPlayers].playerNameText,numPlayers++,logo.alpha=1,state="Wait",debugText.text="[State]: "+state+"; [numPlayers]: "+numPlayers+"; [assetsLoaded]: "+assetsLoaded+"; [hasWinner]: "+hasWinner}function startGame(){logo.alpha=0,state="Start",debugText.text="[State]: "+state+"; [numPlayers]: "+numPlayers+"; [assetsLoaded]: "+assetsLoaded+"; [hasWinner]: "+hasWinner,assetsLoadedTimeout=setTimeout("startGame()",5e3),assetsLoaded=!0}function continueGame(){state="Continue",debugText.text="[State]: "+state+"; [numPlayers]: "+numPlayers+"; [assetsLoaded]: "+assetsLoaded+"; [hasWinner]: "+hasWinner,diePoolText.text="Die pool\n";for(var e in diePool.allObjects)diePoolText.text+=" "+diePool.allObjects[e].value.toString()}function endGame(){clearTimeout(hasWinnerTimeout),numPlayers=0,assetsLoaded=!1,hasWinner=!1,state="End",diePoolText.text="",players=[],playerText.text="",debugText.text="[State]: "+state+"; [numPlayers]: "+numPlayers+"; [assetsLoaded]: "+assetsLoaded+"; [hasWinner]: "+hasWinner,emitter=game.add.emitter(game.world.centerX,250,200),emitter.makeParticles("dollars"),emitter.setRotation(0,0),emitter.setAlpha(.3,.8),emitter.setScale(.5,1),emitter.gravity=0,emitter.start(!1,4e3,20),setTimeout(function(){emitter.destroy(),waitGame()},3e3)}function isRoomFull(){return 4===numPlayers}function isLoaded(){return!!assetsLoaded}function isContinue(){return!!hasWinner}var game=new Phaser.Game(740,600,Phaser.AUTO,"phaser-window",{preload:preload,create:create}),numPlayers=0,players=[],assetsLoaded=!1,hasWinner=!1,logo,text,state,diePool,playerNames={0:"David",1:"Nicu",2:"Eric",3:"Josh"},channel,gameId="",gameName="",gameFileKeys=["dollars","logo","dice1","dice2","dice3","dice4","dice5","dice6"],gameFiles=["sprites/dollar_sign.png","sprites/liars_dice_logo.png","sprites/boardgamepack/PNG/Dice/dieRed1.png","sprites/boardgamepack/PNG/Dice/dieRed2.png","sprites/boardgamepack/PNG/Dice/dieRed3.png","sprites/boardgamepack/PNG/Dice/dieRed4.png","sprites/boardgamepack/PNG/Dice/dieRed5.png","sprites/boardgamepack/PNG/Dice/dieRed6.png"],maxPlayers=4,testButtonGroup,sceneButtonGroup,gameRoundGroup,gameNameGroup,gameTimeGroup,gameModeGroup,playerProfileGroup,gameControlsGroup,gameMenuGroup,playerDiceGroup,numPlayersTimeout,assetsLoadedTimeout,hasWinnerTimeout;$(document).ready(function(){$.ajax({url:"/session/name_id",type:"GET",dataType:"json",success:function(e){gameId=e.id.toString(),gameName=e.name,channel=pusher.subscribe("game_channel"+gameId),channel.bind("my_event",function(){console.log("I have made my move")})}})});